{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Settings - Adarsh ID Cards</title>
  <link rel="icon" type="image/x-icon" href="{% static 'assets/favicon.ico' %}">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@300;400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/variables.css' %}?v=1">
  <link rel="stylesheet" href="{% static 'css/style.css' %}?v=36">
  <link rel="stylesheet" href="{% static 'css/common.css' %}?v=36">
  <link rel="stylesheet" href="{% static 'css/settings.css' %}?v=36">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>

  {% include 'partials/sidebar.html' %}

  <!-- Main -->
  <main class="main">

    <!-- Top Navbar -->
    <header class="topbar">
      <div class="nav-left">
        <button class="sidebar-toggle" id="sidebarToggle">
          <i class="fa-solid fa-bars"></i>
        </button>
        <div class="breadcrumb">
            <a href="{% url 'dashboard' %}" class="breadcrumb-item"><i class="fa-solid fa-house"></i> Home</a>
            <i class="fa-solid fa-chevron-right breadcrumb-sep"></i>
            <span class="breadcrumb-item active">Settings</span>
        </div>
      </div>
    </header>

    <!-- Settings Content -->
    <div class="settings-container">
      
      <!-- Left Column - Profile Card -->
      <div class="settings-left">
        <div class="profile-card">
          <div class="profile-avatar-section">
            <div class="profile-avatar-wrapper">
              <img src="https://i.pravatar.cc/120?img=32" alt="Admin" class="profile-avatar" id="profileAvatar"/>
              <label class="avatar-edit-btn" for="avatarUpload">
                <i class="fa-solid fa-camera"></i>
              </label>
              <input type="file" id="avatarUpload" accept="image/*" hidden/>
            </div>
          </div>
          <div class="profile-info">
            <h2 class="profile-name">{{ user.get_full_name|default:user.username|default:"Super Admin" }}</h2>
            <span class="profile-role">{{ user_role|default:"Administrator" }}</span>
            <span class="profile-email"><i class="fa-solid fa-envelope"></i> {{ user.email|default:"admin@adarsh.com" }}</span>
          </div>
          <div class="profile-stats">
            <div class="profile-stat">
              <span class="stat-value">156</span>
              <span class="stat-label">Total Logins</span>
            </div>
            <div class="profile-stat">
              <span class="stat-value">2 years</span>
              <span class="stat-label">Member Since</span>
            </div>
          </div>
          <div class="profile-actions">
            <button class="btn-logout" id="logoutBtn">
              <i class="fa-solid fa-right-from-bracket"></i>
              Logout
            </button>
          </div>
        </div>
      </div>

      <!-- Right Column - Settings Sections -->
      <div class="settings-right">
        
        <!-- Profile Information -->
        <div class="settings-section">
          <div class="section-header">
            <div class="section-icon">
              <i class="fa-solid fa-user"></i>
            </div>
            <div class="section-title">
              <h3>Profile Information</h3>
              <p>Update your personal details</p>
            </div>
          </div>
          <div class="section-body">
            <form id="profileForm">
              <div class="form-row">
                <div class="form-group">
                  <label>Full Name</label>
                  <input type="text" value="{{ user.get_full_name|default:'Super Admin' }}" placeholder="Enter full name"/>
                </div>
                <div class="form-group">
                  <label>Username</label>
                  <input type="text" value="{{ user.username|default:'super_admin' }}" placeholder="Enter username"/>
                </div>
              </div>
              <div class="form-row">
                <div class="form-group">
                  <label>Email Address</label>
                  <input type="email" value="{{ user.email|default:'admin@adarsh.com' }}" placeholder="Enter email"/>
                </div>
                <div class="form-group">
                  <label>Phone Number</label>
                  <input type="tel" value="{{ user.phone|default:'+91 9876543210' }}" placeholder="Enter phone number"/>
                </div>
              </div>
              <div class="form-actions">
                <button type="submit" class="btn-save">
                  <i class="fa-solid fa-check"></i>
                  Save Changes
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Change Password -->
        <div class="settings-section">
          <div class="section-header">
            <div class="section-icon password">
              <i class="fa-solid fa-lock"></i>
            </div>
            <div class="section-title">
              <h3>Change Password</h3>
              <p>Update your password to keep your account secure</p>
            </div>
          </div>
          <div class="section-body">
            <form id="passwordForm">
              <div class="form-group">
                <label>Current Password</label>
                <div class="password-input-wrapper">
                  <input type="password" id="currentPassword" placeholder="Enter current password"/>
                  <button type="button" class="password-toggle" data-target="currentPassword">
                    <i class="fa-solid fa-eye"></i>
                  </button>
                </div>
              </div>
              <div class="form-row">
                <div class="form-group">
                  <label>New Password</label>
                  <div class="password-input-wrapper">
                    <input type="password" id="newPassword" placeholder="Enter new password"/>
                    <button type="button" class="password-toggle" data-target="newPassword">
                      <i class="fa-solid fa-eye"></i>
                    </button>
                  </div>
                </div>
                <div class="form-group">
                  <label>Confirm New Password</label>
                  <div class="password-input-wrapper">
                    <input type="password" id="confirmPassword" placeholder="Confirm new password"/>
                    <button type="button" class="password-toggle" data-target="confirmPassword">
                      <i class="fa-solid fa-eye"></i>
                    </button>
                  </div>
                </div>
              </div>
              <div class="form-actions">
                <button type="submit" class="btn-save">
                  <i class="fa-solid fa-key"></i>
                  Update Password
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Security Settings -->
        <div class="settings-section">
          <div class="section-header">
            <div class="section-icon security">
              <i class="fa-solid fa-shield-halved"></i>
            </div>
            <div class="section-title">
              <h3>Security Settings</h3>
              <p>Manage your account security preferences</p>
            </div>
          </div>
          <div class="section-body">
            <div class="setting-item">
              <div class="setting-info">
                <h4>Two-Factor Authentication</h4>
                <p>Add an extra layer of security to your account</p>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" id="twoFactorToggle"/>
                <span class="toggle-slider"></span>
              </label>
            </div>
            <div class="setting-item">
              <div class="setting-info">
                <h4>Login Notifications</h4>
                <p>Get notified when someone logs into your account</p>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" id="loginNotifyToggle" checked/>
                <span class="toggle-slider"></span>
              </label>
            </div>
            <div class="setting-item">
              <div class="setting-info">
                <h4>Session Timeout</h4>
                <p>Automatically logout after inactivity</p>
              </div>
              <select class="session-select" id="sessionTimeout">
                <option value="15">15 minutes</option>
                <option value="30" selected>30 minutes</option>
                <option value="60">1 hour</option>
                <option value="120">2 hours</option>
                <option value="0">Never</option>
              </select>
            </div>
          </div>
        </div>

      </div>
    </div>
  </main>

  <!-- Toast Notification -->
  <div class="toast" id="toast">
    <div class="toast-icon">
      <i class="fa-solid fa-check"></i>
    </div>
    <span class="toast-message">Settings saved successfully!</span>
  </div>

  <script src="{% static 'js/script.js' %}"></script>
  <script src="{% static 'js/settings.js' %}"></script>
</body>
</html>

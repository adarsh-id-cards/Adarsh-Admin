{% load static %}

<!-- Unified Sidebar - Works for all user roles -->
<aside class="sidebar" id="sidebar">
  <div class="sidebar-header">
    <div class="sidebar-logo">
      <div class="profile square">
        <img src="{% static 'assets/logo.png' %}" alt="logo">
      </div>
      <h3>Adarsh ID Cards</h3>
    </div>
  </div>
  <nav>
    <!-- Dashboard - Common for all -->
    {% if user.role == 'super_admin' %}
    <a href="{% url 'dashboard' %}" class="{% if active_page == 'dashboard' %}active{% endif %}">
      <i class="fa-solid fa-house"></i><span>Dashboard</span>
    </a>
    {% elif user.role == 'admin_staff' %}
    <a href="{% url 'admin_staff_dashboard' %}" class="{% if active_page == 'dashboard' %}active{% endif %}">
      <i class="fa-solid fa-house"></i><span>Dashboard</span>
    </a>
    {% elif user.role == 'client' %}
    <a href="{% url 'client_dashboard' %}" class="{% if active_page == 'dashboard' %}active{% endif %}">
      <i class="fa-solid fa-house"></i><span>Dashboard</span>
    </a>
    {% elif user.role == 'client_staff' %}
    <a href="{% url 'client_staff_dashboard' %}" class="{% if active_page == 'dashboard' %}active{% endif %}">
      <i class="fa-solid fa-house"></i><span>Dashboard</span>
    </a>
    {% endif %}
    
    {% if user.role == 'super_admin' %}
    <!-- Super Admin Menu -->
    <div class="nav-section">
      <div class="nav-section-line"></div>
      <span class="nav-section-title">User Management</span>
      <div class="nav-section-line"></div>
    </div>
    <a href="{% url 'manage_staff' %}" class="{% if active_page == 'manage_staff' %}active{% endif %}">
      <i class="fa-solid fa-user-tie"></i><span>Manage Staff</span>
    </a>
    <a href="{% url 'manage_clients' %}" id="allClientsLink" class="{% if active_page == 'manage_clients' %}active{% endif %}">
      <i class="fa-solid fa-users"></i><span>Manage Clients</span>
    </a>
    <div class="nav-section">
      <div class="nav-section-line"></div>
      <span class="nav-section-title">ID Card Management</span>
      <div class="nav-section-line"></div>
    </div>
    <a href="{% url 'active_clients' %}" id="activeClientsLink" class="{% if active_page == 'active_clients' %}active{% endif %}">
      <i class="fa-solid fa-user-check"></i><span>Active Clients</span>
    </a>
    <div class="nav-section">
      <div class="nav-section-line"></div>
      <span class="nav-section-title">Site Management</span>
      <div class="nav-section-line"></div>
    </div>
    <a href="{% url 'manage_website' %}" class="{% if active_page == 'manage_website' %}active{% endif %}">
      <i class="fa-solid fa-globe"></i><span>Manage Website</span>
    </a>
    
    {% elif user.role == 'admin_staff' %}
    <!-- Admin Staff Menu -->
    <div class="nav-section">
      <div class="nav-section-line"></div>
      <span class="nav-section-title">Management</span>
      <div class="nav-section-line"></div>
    </div>
    <a href="{% url 'manage_clients' %}" class="{% if active_page == 'manage_clients' %}active{% endif %}">
      <i class="fa-solid fa-users"></i><span>Clients</span>
    </a>
    <a href="{% url 'active_clients' %}" class="{% if active_page == 'active_clients' %}active{% endif %}">
      <i class="fa-solid fa-id-card"></i><span>ID Cards</span>
    </a>
    
    {% elif user.role == 'client' %}
    <!-- Client Menu -->
    <div class="nav-section">
      <div class="nav-section-line"></div>
      <span class="nav-section-title">My Cards</span>
      <div class="nav-section-line"></div>
    </div>
    <a href="#" class="{% if active_page == 'my_cards' %}active{% endif %}">
      <i class="fa-solid fa-id-card"></i><span>View ID Cards</span>
    </a>
    <a href="#" class="{% if active_page == 'my_staff' %}active{% endif %}">
      <i class="fa-solid fa-users"></i><span>My Staff</span>
    </a>
    
    {% elif user.role == 'client_staff' %}
    <!-- Client Staff Menu -->
    <div class="nav-section">
      <div class="nav-section-line"></div>
      <span class="nav-section-title">Work</span>
      <div class="nav-section-line"></div>
    </div>
    <a href="#" class="{% if active_page == 'id_cards' %}active{% endif %}">
      <i class="fa-solid fa-id-card"></i><span>ID Cards</span>
    </a>
    {% endif %}
  </nav>
  
  <div class="sidebar-footer">
    <div class="sidebar-actions">
      <a href="{% url 'settings' %}" class="{% if active_page == 'settings' %}active{% endif %}">
        <i class="fa-solid fa-gear"></i><span>Settings</span>
      </a>
      <a href="{% url 'logout' %}" class="logout-link">
        <i class="fa-solid fa-right-from-bracket"></i><span>Logout</span>
      </a>
    </div>
    <div class="sidebar-info">
      <div class="info-item">
        <i class="fa-solid fa-calendar-days"></i>
        <span id="date"></span>
      </div>
      <div class="info-item">
        <i class="fa-solid fa-clock"></i>
        <span id="time"></span>
      </div>
    </div>
    <div class="sidebar-user">
      <div class="user-avatar">
        {% if user.profile_image %}
        <img src="{{ user.profile_image.url }}" alt="profile">
        {% else %}
        <img src="https://i.pravatar.cc/100?img=32" alt="profile">
        {% endif %}
      </div>
      <div class="user-info">
        <span class="user-name">{{ user.get_full_name|default:user.username }}</span>
        <span class="user-role">{{ user_role|default:user.get_role_display }}</span>
      </div>
    </div>
  </div>
</aside>
